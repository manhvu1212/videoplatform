/**
 * Created by mrhoang on 5/21/15.
 */
tinymce.PluginManager.add('files', function(editor, url) {
    editor.addButton('files', {
        text: 'Files',
        icon: false,
        onclick: function() {
            POPUPFILE.open(function(data){
                switch (data.extension){
                    case 'jpg':
                    case 'jpeg':
                    case 'png':
                    case 'gif':
                    case 'bmp':
                        editor.insertContent('<img alt = "'+data.title+'"  src="/upload/'+data.url+'"  >');
                        break;
                    case 'doc':
                    case 'docx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'xls':
                    case 'xlsx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'pdf':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/pdf.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    default :
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/file.png"  alt = "'+data.title+'"   ></a>');
                        break;
                }
            })
        }
    });

    // Adds a menu item to the tools menu
    editor.addMenuItem('files', {
        text: 'Files',
        context: 'tools',
        onclick: function() {
            POPUPFILE.open(function(data){
                switch (data.extension){
                    case 'jpg':
                    case 'jpeg':
                    case 'png':
                    case 'gif':
                    case 'bmp':
                        editor.insertContent('<img alt = "'+data.title+'"  src="/upload/'+data.url+'"   >');
                        break;
                    case 'doc':
                    case 'docx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'xls':
                    case 'xlsx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'pdf':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/pdf.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    default :
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "/js/tinymce/plugins/files/icons/file.png"  alt = "'+data.title+'"   ></a>');
                        break;
                }
            })
        }
    });
});