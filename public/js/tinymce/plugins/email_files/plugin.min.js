/**
 * Created by mrhoang on 5/21/15.
 */
function getBaseURL () {
    return location.protocol + "//" + location.hostname;
}
tinymce.PluginManager.add('email_files', function(editor, url) {
    editor.addButton('email_files', {
        text: 'Files',
        icon: false,
        onclick: function() {
            POPUPFILE.open(function(data){
                var url = getBaseURL()+'/'+data.url;
                switch (data.extension){
                    case 'jpg':
                    case 'jpeg':
                    case 'png':
                    case 'gif':
                    case 'bmp':
                        editor.insertContent('<img  width = "600px" alt = "'+data.title+'"  src="'+url+'"  >');
                        break;
                    case 'doc':
                    case 'docx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/email/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'xls':
                    case 'xlsx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'pdf':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/pdf.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    default :
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/file.png"  alt = "'+data.title+'"   ></a>');
                        break;
                }

            })
        }

    });

    // Adds a menu item to the tools menu
    editor.addMenuItem('email_files', {
        text: 'Files',
        context: 'tools',
        onclick: function() {
            POPUPFILE.open(function(data){
                var url = getBaseURL()+'/'+data.url;
                switch (data.extension){
                    case 'jpg':
                    case 'jpeg':
                    case 'png':
                    case 'gif':
                    case 'bmp':
                        editor.insertContent('<img  width = "600px" alt = "'+data.title+'"  src="'+url+'"  >');
                        break;
                    case 'doc':
                    case 'docx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'xls':
                    case 'xlsx':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/doc.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    case 'pdf':
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/pdf.png"  alt = "'+data.title+'"   ></a>');
                        break;
                    default :
                        editor.insertContent('<a target = "_bank" href="/'+data.url+'" ><img  width = "32" src = "'+getBaseURL()+'/js/tinymce/plugins/files/icons/file.png"  alt = "'+data.title+'"   ></a>');
                        break;
                }
            });

        }

    });
});